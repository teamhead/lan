{"version":3,"sources":["webpack:///./node_modules/jwt-decode/lib/index.js","webpack:///./src/view/login/login.vue?9014","webpack:///./node_modules/jwt-decode/lib/base64_url_decode.js","webpack:///./node_modules/jwt-decode/lib/atob.js","webpack:///./src/view/login/login.vue?6b6d","webpack:///./src/api/login.js","webpack:///src/view/login/login.vue","webpack:///./src/view/login/login.vue?5c89","webpack:///./src/view/login/login.vue"],"names":["base64_url_decode","__webpack_require__","InvalidTokenError","message","this","prototype","Error","name","module","exports","token","options","pos","header","JSON","parse","split","e","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_10_oneOf_1_0_node_modules_css_loader_index_js_ref_10_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_10_oneOf_1_2_node_modules_less_loader_dist_cjs_js_ref_10_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_login_vue_vue_type_style_index_0_lang_less___WEBPACK_IMPORTED_MODULE_0___default","atob","b64DecodeUnicode","str","decodeURIComponent","replace","m","p","code","charCodeAt","toString","toUpperCase","length","output","err","chars","InvalidCharacterError","polyfill","input","String","bs","buffer","bc","idx","charAt","fromCharCode","indexOf","window","bind","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","icon","title","bordered","ref","model","LoginUser","rules","prop","placeholder","value","callback","$$v","$set","expression","slot","size","type","long","on","click","handleSubmit","_v","staticRenderFns","login_Login","data","http","request","url","method","loginvue_type_script_lang_js_","userName","password","required","trigger","methods","_this","$refs","loginForm","validate","valid","then","res","console","log","Object","util","decoded","lib_default","$store","dispatch","isEmpty","$router","push","$config","homeName","$Message","success","content","duration","catch","error","msg","undefined","es6_typeof","keys","trim","login_loginvue_type_script_lang_js_","component","componentNormalizer","__file","__webpack_exports__"],"mappings":"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","file":"js/chunk-6a50.29947964.js","sourcesContent":["'use strict';\n\nvar base64_url_decode = require('./base64_url_decode');\n\nfunction InvalidTokenError(message) {\n  this.message = message;\n}\n\nInvalidTokenError.prototype = new Error();\nInvalidTokenError.prototype.name = 'InvalidTokenError';\n\nmodule.exports = function (token,options) {\n  if (typeof token !== 'string') {\n    throw new InvalidTokenError('Invalid token specified');\n  }\n\n  options = options || {};\n  var pos = options.header === true ? 0 : 1;\n  try {\n    return JSON.parse(base64_url_decode(token.split('.')[pos]));\n  } catch (e) {\n    throw new InvalidTokenError('Invalid token specified: ' + e.message);\n  }\n};\n\nmodule.exports.InvalidTokenError = InvalidTokenError;\n","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/lib/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./login.vue?vue&type=style&index=0&lang=less&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/lib/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./login.vue?vue&type=style&index=0&lang=less&\"","var atob = require('./atob');\n\nfunction b64DecodeUnicode(str) {\n  return decodeURIComponent(atob(str).replace(/(.)/g, function (m, p) {\n    var code = p.charCodeAt(0).toString(16).toUpperCase();\n    if (code.length < 2) {\n      code = '0' + code;\n    }\n    return '%' + code;\n  }));\n}\n\nmodule.exports = function(str) {\n  var output = str.replace(/-/g, \"+\").replace(/_/g, \"/\");\n  switch (output.length % 4) {\n    case 0:\n      break;\n    case 2:\n      output += \"==\";\n      break;\n    case 3:\n      output += \"=\";\n      break;\n    default:\n      throw \"Illegal base64url string!\";\n  }\n\n  try{\n    return b64DecodeUnicode(output);\n  } catch (err) {\n    return atob(output);\n  }\n};\n","/**\n * The code was extracted from:\n * https://github.com/davidchambers/Base64.js\n */\n\nvar chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';\n\nfunction InvalidCharacterError(message) {\n  this.message = message;\n}\n\nInvalidCharacterError.prototype = new Error();\nInvalidCharacterError.prototype.name = 'InvalidCharacterError';\n\nfunction polyfill (input) {\n  var str = String(input).replace(/=+$/, '');\n  if (str.length % 4 == 1) {\n    throw new InvalidCharacterError(\"'atob' failed: The string to be decoded is not correctly encoded.\");\n  }\n  for (\n    // initialize result and counters\n    var bc = 0, bs, buffer, idx = 0, output = '';\n    // get next character\n    buffer = str.charAt(idx++);\n    // character found in table? initialize bit storage and add its ascii value;\n    ~buffer && (bs = bc % 4 ? bs * 64 + buffer : buffer,\n      // and if not first of each 4 characters,\n      // convert the first 8 bits to one ascii character\n      bc++ % 4) ? output += String.fromCharCode(255 & bs >> (-2 * bc & 6)) : 0\n  ) {\n    // try to find character in table (0-63, not found => -1)\n    buffer = chars.indexOf(buffer);\n  }\n  return output;\n}\n\n\nmodule.exports = typeof window !== 'undefined' && window.atob && window.atob.bind(window) || polyfill;\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"login\"},[_c('div',{staticClass:\"login-con\"},[_c('Card',{attrs:{\"icon\":\"log-in\",\"title\":\"欢迎登录\",\"bordered\":false}},[_c('div',{staticClass:\"form-con\"},[_c('Form',{ref:\"loginForm\",attrs:{\"model\":_vm.LoginUser,\"rules\":_vm.rules}},[_c('FormItem',{attrs:{\"prop\":\"username\"}},[_c('Input',{attrs:{\"placeholder\":\"请输入用户名\"},model:{value:(_vm.LoginUser.userName),callback:function ($$v) {_vm.$set(_vm.LoginUser, \"userName\", $$v)},expression:\"LoginUser.userName\"}},[_c('span',{attrs:{\"slot\":\"prepend\"},slot:\"prepend\"},[_c('Icon',{attrs:{\"size\":16,\"type\":\"ios-person\"}})],1)])],1),_c('FormItem',{attrs:{\"prop\":\"password\"}},[_c('Input',{attrs:{\"type\":\"password\",\"placeholder\":\"请输入密码\"},model:{value:(_vm.LoginUser.password),callback:function ($$v) {_vm.$set(_vm.LoginUser, \"password\", $$v)},expression:\"LoginUser.password\"}},[_c('span',{attrs:{\"slot\":\"prepend\"},slot:\"prepend\"},[_c('Icon',{attrs:{\"size\":14,\"type\":\"md-lock\"}})],1)])],1),_c('FormItem',[_c('Button',{attrs:{\"type\":\"primary\",\"long\":\"\"},on:{\"click\":_vm.handleSubmit}},[_vm._v(\"登录\")])],1)],1)],1)])],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import axios from '../libs/http'\n// import axios from '@/libs/api.request'\n\n// export function Login (data) {\n//   return axios({\n//     url: '/api/users/login',\n//     method: 'post',\n//     data: data\n//   })\n// }\n\nexport const Login = (data) => {\n  return axios.request({\n    url: '/api/users/login',\n    data,\n    method: 'post'\n  })\n}\n","<style lang=\"less\">\n  @import './login.less';\n</style>\n\n<template>\n  <div class=\"login\">\n    <div class=\"login-con\">\n      <Card icon=\"log-in\" title=\"欢迎登录\" :bordered=\"false\">\n        <div class=\"form-con\">\n          <!-- <login-form @on-success-valid=\"handleSubmit\"></login-form> -->\n          <Form ref=\"loginForm\" :model=\"LoginUser\" :rules=\"rules\">\n            <FormItem prop=\"username\">\n              <Input v-model=\"LoginUser.userName\" placeholder=\"请输入用户名\">\n                <span slot=\"prepend\">\n                  <Icon :size=\"16\" type=\"ios-person\"></Icon>\n                </span>\n              </Input>\n            </FormItem>\n            <FormItem prop=\"password\">\n              <Input type=\"password\" v-model=\"LoginUser.password\" placeholder=\"请输入密码\">\n                <span slot=\"prepend\">\n                  <Icon :size=\"14\" type=\"md-lock\"></Icon>\n                </span>\n              </Input>\n            </FormItem>\n            <FormItem>\n              <Button @click=\"handleSubmit\" type=\"primary\" long>登录</Button>\n            </FormItem>\n          </Form>\n          <!-- <p class=\"login-tip\">输入任意用户名和密码即可</p> -->\n        </div>\n      </Card>\n    </div>\n  </div>\n</template>\n\n\n<script>\nimport { Login } from '@/api/login'\nimport { setToken,setUsername } from '@/libs/util'\nimport jwt_decode from 'jwt-decode'\n// import { mapActions } from 'vuex'\nexport default {\n  name: 'login',\n  data () {\n    return {\n      LoginUser: {\n        userName: 'yangmv',\n        password: '123456'\n      },\n      rules: {\n        userName: [\n          { required: true, message: '账号不能为空', trigger: 'blur' }\n        ],\n        password: [\n          { required: true, message: '密码不能为空', trigger: 'blur' }\n        ]\n      }\n    }\n  },\n  methods: {\n    // ...mapActions([\n    //   'handleLogin',\n    //   'getUserInfo'\n    // ]),\n    // handleSubmit () {\n    //   const userName = this.LoginUser.userName\n    //   const password = this.LoginUser.password\n    //   this.handleLogin({ userName, password }).then(res => {\n    //     this.getUserInfo().then(res => {\n    //       this.$router.push({\n    //         name: this.$config.homeName\n    //       })\n    //     })\n    //   })\n    // },\n    handleSubmit () {\n      this.$refs.loginForm.validate((valid) => {\n        if (valid) {\n          Login(this.LoginUser)\n            .then( res => {\n              console.log('res--->',res)\n              const token = res.data.token\n              //存储token信息\n              setToken(token)\n              //解析token并存储到vuex\n              const decoded = jwt_decode(token)\n              console.log(decoded)\n              setUsername(decoded.name)\n              this.$store.dispatch(\"setAuth\",!this.isEmpty(decoded));\n              this.$store.dispatch(\"setUser\",decoded);\n              // 跳转到首页\n              this.$router.push({\n                name: this.$config.homeName\n              })\n              // 显示提示信息\n              this.$Message.success({   // $Message为全局消息提示信息\n                content: '登陆成功',\n                duration: 5 //提示显示5秒\n              });\n            })\n            .catch(error => {\n              console.log(error.message)\n              this.$Message.error({\n                content: '登录失败（' + error.msg + '）',\n                duration: 5\n              })\n            })\n        }\n      })\n    },\n    isEmpty(value) {\n        return (\n            value === undefined ||\n            value === null ||\n            (typeof value === \"object\" && Object.keys(value).length === 0) ||\n            (typeof value === \"string\" && value.trim().length === 0)\n        );\n    }\n  }\n}\n</script>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./login.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./login.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./login.vue?vue&type=template&id=2345de12&\"\nimport script from \"./login.vue?vue&type=script&lang=js&\"\nexport * from \"./login.vue?vue&type=script&lang=js&\"\nimport style0 from \"./login.vue?vue&type=style&index=0&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"login.vue\"\nexport default component.exports"],"sourceRoot":""}